apply plugin: 'spring-boot'
apply plugin: 'java'

ext {
    publicDir = 'src/main/resources/public'
}

repositories {
    mavenCentral()
}

jar {
    baseName = 'backend'
    version =  '0.0.1-SNAPSHOT'
}

dependencies {
    compile(
            "org.springframework.boot:spring-boot-starter-web:1.2.3.RELEASE",
            'com.google.guava:guava:18.0'
    )

    testCompile(
            "org.springframework.boot:spring-boot-starter-test:1.2.3.RELEASE",
            'com.jayway.jsonpath:json-path-assert:2.0.0'
    )
}

clean {
    delete publicDir
}

task copyPublic(type: Copy, dependsOn: ':front-end:build') {
    delete publicDir

    from project(':front-end').file('public')
    into publicDir
}